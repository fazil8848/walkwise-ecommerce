<!DOCTYPE HTML>
<html>

<head>
	<title>WalkWise</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


	<link id="page_favicon" href="/logo.svg" rel="icon" type="image/x-icon">

	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Rokkitt:100,300,400,700" rel="stylesheet">

	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

	<!-- Animate.css -->
	<link rel="stylesheet" href="/user/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="/user/css/icomoon.css">
	<!-- Ion Icon Fonts-->
	<link rel="stylesheet" href="/user/css/ionicons.min.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="/user/css/bootstrap.min.css">

	<!-- Magnific Popup -->
	<link rel="stylesheet" href="/user/css/magnific-popup.css">

	<!-- Flexslider  -->
	<link rel="stylesheet" href="/user/css/flexslider.css">

	<!-- Owl Carousel -->
	<link rel="stylesheet" href="/user/css/owl.carousel.min.css">
	<link rel="stylesheet" href="/user/css/owl.theme.default.min.css">

	<!-- Date Picker -->
	<link rel="stylesheet" href="/user/css/bootstrap-datepicker.css">
	<!-- Flaticons  -->
	<link rel="stylesheet" href="/user/fonts/flaticon/font/flaticon.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="/user/css/style.css">

	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.css"> -->


	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
		integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />


	<style>
		.product-cart {
			display: flex;
			justify-content: space-between;
			align-items: center;
		}

		.one-forth,
		.one-eight {
			flex-basis: 25%;
		}
	</style>

	<!-- <link rel="stylesheet" href="/user/css/formstyle.css"> -->

</head>

<body>

	<div class="colorlib-loader"></div>

	<div id="page">
		<nav class="colorlib-nav" role="navigation">
			<div class="top-menu">
				<div class="container">
					<div class="row">
						<div class="col-sm-7 col-md-9">
							<div id="colorlib-logo"><a  href="#"> <img style="width: 40px;" src="/logo.svg" alt=""> WalkWise</a></div>
						</div>
						<div class="col-sm-5 col-md-3">
							<form action="#" class="search-wrap">
								<div class="form-group">
									<input type="search" class="form-control search" placeholder="Search">
									<button class="btn btn-primary submit-search text-center" type="submit"><i
											class="icon-search"></i></button>
								</div>
							</form>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-12 text-left menu-1">
							<ul>
								<li><a href="/home">Home</a></li>
								<li>
									<a href="/shop">Shop</a>
								</li>
								<li><a href="/about">About</a></li>
								<li><a href="/contact">Contact</a></li>
								<li class="cart active">
									<% if (typeof length !=='undefined' ) {%>
										<a href="/cart"><i class="icon-shopping-cart"></i> Cart [<%=length%>]</a>
										<%}else {%>
											<a href="/cart"><i class="icon-shopping-cart"></i> Cart [0]</a>
											<% } %>
								</li>
								<li class="has-dropdown cart">
									<a href="#"><span class="material-symbols-outlined">account_circle</span></a>
									<ul class="dropdown">


										<% if (typeof req.session.user_id !=='undefined' ) {%>
											<li><a href="/userProfile">Profile</a></li>
											<li><a href="/viewOrders">Orders</a></li>
											<li><a href="/logout">logout</a></li>
											<%} else {%>
												<li><a href="/login">login</a></li>
											<% } %>


													<!-- <li><a href="#">Checkout</a></li>
												<li><a href="#">Order Complete</a></li>
												<li><a href="#">Wishlist</a></li> -->
									</ul>
								</li>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<div class="sale">
				<div class="container">
					<div class="row">
						<div class="col-sm-8 offset-sm-2 text-center">
							<div class="row">
								<div class="owl-carousel2">
									<div class="item">
										<div class="col">
											<h3><a href="#">25% off (Almost) Everything! Use Code: Summer Sale</a></h3>
										</div>
									</div>
									<div class="item">
										<div class="col">
											<h3><a href="#">Our biggest sale yet 50% off all summer shoes</a></h3>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</nav>

		<div class="breadcrumbs">
			<div class="container">
				<div class="row">
					<div class="col">
						<p class="bread"><span><a href="/home">Home</a></span> / <span>Shopping Cart</span></p>
					</div>
				</div>
			</div>
		</div>


		<div class="colorlib-product">
			<div class="container-fluid px-md-5">

				<div class="row row-pb-lg">
					<div class="col-md-10 offset-md-1">
						<div class="process-wrap">
							<div class="process text-center active">
								<p><span>01</span></p>
								<h3>Shopping Cart</h3>
							</div>
							<div class="process text-center">
								<p><span>02</span></p>
								<h3>Checkout</h3>
							</div>
							<div class="process text-center">
								<p><span>03</span></p>
								<h3>Order Complete</h3>
							</div>
						</div>
					</div>
				</div>

				<div class=" container-fluid ">
					<div class="row ">
						<div class="col-md-12">

							<div class="product-name d-flex">
								<div class="one-forth text-center px-4">
									<span>Product Details</span>
								</div>
								<div class="one-eight text-right px-4">
									<span class="pr-5">Price</span>
								</div>
								<div class="one-forth text-center px-4">
									<span>Quantity</span>
								</div>
								<div class="one-eight text-center px-4">
									<span>Remove</span>
								</div>
							</div>
							<% if (typeof data2=='undefined' ) { %>
								<% data.forEach(function(product, index) { %>
									<div class="product-cart">
										<div class="one-forth text-center ">
											<div>
												<img class="product-img"
													src="/productImages/<%= product.product_id.image[0]%>" alt="">
											</div>
											<div class="display-tc">
												<h3>
													<%= product.product_id.productName %>
												</h3>
											</div>
										</div>
										<div class="one-eight text-center">
											<div class="display-tc">
												<span class="price">
													<%= product.product_id.price %>
												</span>
											</div>
										</div>



										<form>

											<div class="d-flex align-items-center one-forth text-center px-4">

												<div class="value-button btn-primary btn-outline-primary " id="decrease"
													onclick="decreaseQty('<%= userId %>','<%= product.product_id._id %>')"
													value="Decrease Value">
													<i class="icon-minus2"></i>
												</div>

												<input type="number" class="text-center"
													onchange="changeQty('<%= userId %>','<%= product.product_id._id %>')"
													id="<%= product.product_id._id %>" value="<%= product.quantity %>"
													min="1" max="100" disabled />

												<div class="value-button  btn-primary btn-outline-primary "
													id="increase"
													onclick="increaseQty('<%= userId %>','<%= product.product_id._id %>')"
													value="Increase Value">
													<i class="icon-plus2"></i>
												</div>

											</div>

										</form>


										<div class="one-eight text-center">
											<div class="display-tc">
												<a class="btn btn-primary btn-outline-primary " id="delete"
													onclick="deleteCartItem('<%= product.product_id._id %>')">X</a>
											</div>
										</div>
									</div>
									<% }) %>
										<% } else { %>
											<div class="product-cart">

												<div class="one-eight  text-center "></div>

												<div class="one-eight  text-center ">
													<div class="display-tc">
														<span>Your Cart Is Empty</span>
													</div>
												</div>
												<div class="one-eight text-center">
													<div class="display-tc">
														<a href="/home">
															<span class="addtocart">
																<button
																	class=" btn btn-primary btn-outline-primary  d-inline">
																	<i class="icon-shopping-cart d-inline"></i> Continue
																	Shopping
																</button>
															</span>
														</a>
													</div>
												</div>
												<div class="one-eight  text-center "></div>

											</div>

											<% } %>
						</div>
					</div>

				</div>
			</div>
		</div>

		<section>
			<div class="container">
				<div class="row row-pb-lg">
					<div class="col-md-12">
						<div class="total-wrap">
							<div class="row total">
								<div class="col-md-3">

								</div>
								<div class="col-md-6 text-center">
									<div class="total">
										<div class="sub">
											<p>
												<span>Subtotal:</span>
												<span id="subtotal">
													<% if (typeof total !=='undefined' ) { %>
														₹<%= total %>
															<% } else { %>
																₹0.00
																<% } %>
												</span>
											</p>
											<p><span>Delivery:</span> <span>₹0.00</span></p>
											<p><span>Discount:</span> <span>₹0.00</span></p>
										</div>
										<div class="grand-total">
											<p>
												<span><strong>Total:</strong></span>
												<span id="grandtotal">
													<% if (typeof total !=='undefined' ) { %>
														₹<%= total %>
															<% } else { %>
																₹0.00
																<% } %>
												</span>
											</p>
										</div>

										<br>
										<% if (typeof data2=='undefined' ) { %>
											<a href="/checkOut">
												<span class="addtocart">
													<button class="btn btn-primary btn-outline-primary  d-inline">
														<i class="icon-shopping-cart d-inline"></i> Place Order
													</button>
												</span>
											</a>
											<%} else {%>
												<a href="/home">
													<span class="addtocart">
														<button class="btn btn-primary btn-outline-primary  d-inline">
															<i class="icon-shopping-cart d-inline"></i> Continue
															Shopping
														</button>
													</span>
												</a>
												<%}%>

									</div>
								</div>

							</div>
						</div>
					</div>
				</div>
			</div>

		</section>

		<footer id="colorlib-footer" role="contentinfo">
			<div class="container">
				<div class="row row-pb-md">
					<div class="col footer-col colorlib-widget">
						<h4>About WalkWise</h4>
						<p>Even the all-powerful Pointing has no control about the blind texts it is an almost
							unorthographic life</p>
						<p>
						<ul class="colorlib-social-icons">
							<li><a href="#"><i class="icon-twitter"></i></a></li>
							<li><a href="#"><i class="icon-facebook"></i></a></li>
							<li><a href="#"><i class="icon-linkedin"></i></a></li>
							<li><a href="#"><i class="icon-dribbble"></i></a></li>
						</ul>
						</p>
					</div>
					<div class="col footer-col colorlib-widget">
						<h4>Customer Care</h4>
						<p>
						<ul class="colorlib-footer-links">
							<li><a href="#">Contact</a></li>
							<li><a href="#">Returns/Exchange</a></li>
							<li><a href="#">Gift Voucher</a></li>
							<li><a href="#">Wishlist</a></li>
							<li><a href="#">Special</a></li>
							<li><a href="#">Customer Services</a></li>
							<li><a href="#">Site maps</a></li>
						</ul>
						</p>
					</div>
					<div class="col footer-col colorlib-widget">
						<h4>Information</h4>
						<p>
						<ul class="colorlib-footer-links">
							<li><a href="#">About us</a></li>
							<li><a href="#">Delivery Information</a></li>
							<li><a href="#">Privacy Policy</a></li>
							<li><a href="#">Support</a></li>
							<li><a href="#">Order Tracking</a></li>
						</ul>
						</p>
					</div>

					<div class="col footer-col">
						<h4>News</h4>
						<ul class="colorlib-footer-links">
							<li><a href="#">Blog</a></li>
							<li><a href="#">Press</a></li>
							<li><a href="#">Exhibitions</a></li>
						</ul>
					</div>

					<div class="col footer-col">
						<h4>Contact Information</h4>
						<ul class="colorlib-footer-links">
							<li>291 South 21th Street, <br> Suite 721 New York NY 10016</li>
							<li><a href="tel://1234567920">+ 1235 2355 98</a></li>
							<li><a href="mailto:info@yoursite.com">info@yoursite.com</a></li>
							<li><a href="#">yoursite.com</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="copy">
				<div class="row">
					<div class="col-sm-12 text-center">
						<p>
							<span><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
								Copyright &copy;
								<script>document.write(new Date().getFullYear());</script> All rights reserved | This
								template is made with <i class="icon-heart" aria-hidden="true"></i> by <a
									href="https://colorlib.com" target="_blank">Colorlib</a>
								<!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
							</span>
							<span class="block">Demo Images: <a href="http://unsplash.co/" target="_blank">Unsplash</a>
								, <a href="http://pexels.com/" target="_blank">Pexels.com</a></span>
						</p>
					</div>
				</div>
			</div>
		</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="ion-ios-arrow-up"></i></a>
	</div>

	<script src="/vendor/jquery-2.2.4.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js"
		integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4"
		crossorigin="anonymous"></script>

	<!-- jQuery -->
	<script src="/user/js/jquery.min.js"></script>
	<!-- popper -->
	<script src="/user/js/popper.min.js"></script>
	<!-- bootstrap 4.1 -->
	<script src="/user/js/bootstrap.min.js"></script>
	<!-- jQuery easing -->
	<script src="/user/js/jquery.easing.1.3.js"></script>
	<!-- Waypoints -->
	<script src="/user/js/jquery.waypoints.min.js"></script>
	<!-- Flexslider -->
	<script src="/user/js/jquery.flexslider-min.js"></script>
	<!-- Owl carousel -->
	<script src="/user/js/owl.carousel.min.js"></script>
	<!-- Magnific Popup -->
	<script src="/user/js/jquery.magnific-popup.min.js"></script>
	<script src="/user/js/magnific-popup-options.js"></script>
	<!-- Date Picker -->
	<script src="/user/js/bootstrap-datepicker.js"></script>
	<!-- Stellar Parallax -->
	<script src="/user/js/jquery.stellar.min.js"></script>
	<!-- Main -->
	<script src="/user/js/main.js"></script>

	<!-- swal -->
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>


	<script>

		function decreaseQty(userId, productId) {
			const product = document.getElementById(productId);
			product.stepDown();
			product.dispatchEvent(new Event('change'));
		}

		function increaseQty(userId, productId) {
			const product = document.getElementById(productId);
			product.stepUp();
			product.dispatchEvent(new Event('change'))
		}

	</script>

	<script>
		function deleteCartItem(id) {
			console.log('deletecartitem method is called');
			$.ajax({
				url: '/removeCartItem',
				method: 'post',
				encoded: true,
				data: {
					id: id
				}
			}).done((data) => {

				if (data.success === true) {
					window.location.reload()
				}
			})
		}
	</script>

	<script>
		function changeQty(userId, productId) {

			const value = parseInt(document.getElementById(productId).value);
			if (value < 1) {
				alert('Please Enter a Number Greater than zero');
			} else {
				$.ajax({
					url: '/changeQty',
					data: {
						user: userId,
						product: productId,
						qty: value,
					},
					method: 'POST',
					encoded: true,

				}).done((data) => {
					if (data.success) {
						console.log("quantity changed ");
						const subtotalElement = document.getElementById('subtotal');
						const grandtotalElement = document.getElementById('grandtotal');
						subtotalElement.innerText = '₹' + data.price;
						grandtotalElement.innerText = '₹' + data.price;
					} else {
						swal('Ooops!', 'Out Of Stock', 'error');
						console.error();
					}
				});


			}
		}
	</script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
</body>

</html>